!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/cdk/portal"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/cdk/portal","@angular/platform-browser","@angular/common"],e):e((t.covalent=t.covalent||{},t.covalent.core=t.covalent.core||{},t.covalent.core["virtual-scroll"]={}),t.ng.core,t.ng.cdk.portal,t.ng.platformBrowser,t.ng.common)}(this,function(t,e,o,r,i){"use strict";var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};var a=function(t){function e(e,o){return t.call(this,e,o)||this}return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e}(o.TemplatePortalDirective);a.decorators=[{type:e.Directive,args:[{selector:"[tdVirtualScrollRow]"}]}],a.ctorParameters=function(){return[{type:e.TemplateRef},{type:e.ViewContainerRef}]};var s=function(){function t(t,e,o,r){this._elementRef=t,this._domSanitizer=e,this._renderer=o,this._changeDetectorRef=r,this._initialized=!1,this._totalHeight=0,this._hostHeight=0,this._scrollVerticalOffset=0,this._fromRow=0,this._toRow=0,this.trackBy=function(t,e){return e}}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this._initialized&&this._calculateVirtualRows(),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualData",{get:function(){return this._virtualData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeight",{get:function(){return this._rows&&this._rows.toArray()[0]?this._rows.toArray()[0].nativeElement.getBoundingClientRect().height:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalHeight",{get:function(){return this._totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fromRow",{get:function(){return this._fromRow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toRow",{get:function(){return this._toRow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetTransform",{get:function(){return this._offsetTransform},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this._rowChangeSubs=this._rows.changes.subscribe(function(){t._calculateVirtualRows()}),this._initialized=!0,this._calculateVirtualRows()},t.prototype.ngAfterViewChecked=function(){var t=this._elementRef.nativeElement.getBoundingClientRect().height;this._hostHeight!==t&&(this._hostHeight=t,this._initialized&&this._calculateVirtualRows())},t.prototype.ngOnDestroy=function(){this._rowChangeSubs&&this._rowChangeSubs.unsubscribe()},t.prototype.handleScroll=function(t){var e=t.target;if(e){var o=e.scrollTop;this._scrollVerticalOffset!==o&&(this._scrollVerticalOffset=o,this._initialized&&this._calculateVirtualRows())}},t.prototype.refresh=function(){this._calculateVirtualRows()},t.prototype.scrollTo=function(t){this._elementRef.nativeElement.scrollTop=t*this.rowHeight,this._changeDetectorRef.markForCheck()},t.prototype.scrollToStart=function(){this.scrollTo(0),this._changeDetectorRef.markForCheck()},t.prototype.scrollToEnd=function(){this.scrollTo(this.totalHeight/this.rowHeight),this._changeDetectorRef.markForCheck()},t.prototype._calculateVirtualRows=function(){var t=this;if(this._data){this._totalHeight=this._data.length*this.rowHeight;var e=Math.floor(this._scrollVerticalOffset/this.rowHeight)-2;this._fromRow=e>0?e:0;var o=Math.floor(this._hostHeight/this.rowHeight)+4+this.fromRow;isFinite(o)&&o>this._data.length?o=this._data.length:isFinite(o)||(o=2),this._toRow=o}else this._totalHeight=0,this._fromRow=0,this._toRow=0;var r=0;this._scrollVerticalOffset>2*this.rowHeight&&(r=this.fromRow*this.rowHeight),this._offsetTransform=this._domSanitizer.bypassSecurityTrustStyle("translateY("+(r-this.totalHeight)+"px)"),this._data&&(this._virtualData=this.data.slice(this.fromRow,this.toRow)),Promise.resolve().then(function(){t._changeDetectorRef.markForCheck()})},t}();s.decorators=[{type:e.Component,args:[{selector:"td-virtual-scroll-container",styles:[":host{\n  display:block;\n  height:100%;\n  width:100%;\n  overflow:auto;\n  position:relative; }\n"],template:'<div [style.height.px]="totalHeight"></div>\n<div [style.transform]="offsetTransform"\n      [style.position]="\'absolute\'"\n      [style.width.%]="100">\n  <ng-template let-row\n                let-index="index"\n                ngFor\n                [ngForOf]="virtualData"\n                [ngForTrackBy]="trackBy">\n    <div #rowElement\n         [style.width.%]="100">\n      <ng-template *ngIf="_rowTemplate"\n                  [ngTemplateOutlet]="_rowTemplate.templateRef"\n                  [ngTemplateOutletContext]="{row: row,\n                                      index: (fromRow + index),\n                                      first: (fromRow + index) === 0,\n                                      last: (fromRow + index) === (data.length - 1),\n                                      odd: ((fromRow + index + 1) % 2) === 1,\n                                      even: ((fromRow + index + 1) % 2) === 0}">\n      </ng-template>\n    </div>\n  </ng-template>\n</div>',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],s.ctorParameters=function(){return[{type:e.ElementRef},{type:r.DomSanitizer},{type:e.Renderer2},{type:e.ChangeDetectorRef}]},s.propDecorators={data:[{type:e.Input,args:["data"]}],_rows:[{type:e.ViewChildren,args:["rowElement"]}],_rowTemplate:[{type:e.ContentChild,args:[a]}],trackBy:[{type:e.Input,args:["trackBy"]}],handleScroll:[{type:e.HostListener,args:["scroll",["$event"]]}]};var l=[a,s],c=function(){return function(){}}();c.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[l],exports:[l]}]}],c.ctorParameters=function(){return[]},t.CovalentVirtualScrollModule=c,t.TdVirtualScrollContainerComponent=s,t.TdVirtualScrollRowDirective=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-core-virtual-scroll.umd.min.js.map
